@page
@model ShoppingCart.Pages.User.UserModel
@{
    List<Dictionary<string, object>> Data = ViewData["K"] as List<Dictionary<string, object>>;
    var prd = ViewData["Mochi"] as System.Data.DataTable;
    var edit = ViewData["row"] as System.Data.DataTable;
}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<style>

    body {
        background-color: rgba(0, 0, 0,.2);
        background-color: #CCC;
        background-attachment: fixed;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: left top;
        background-image: url(https://images.unsplash.com/photo-1629984164142-21c2039de926?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80);
    }

    .item_header {
        display: flex;
        width: 1000px;
        margin: 0 auto;
        height: 30px;
        background-color: #fff;
        border-radius: 3px;
        padding-left: 10px;
    }

        .item_header div {
            width: 200px;
            color: #888;
            line-height: 30px;
        }

        .item_header .item_detail {
            width: 33.5%;
        }

    .item_body {
        margin-top: 20px;
        height: 100px;
        align-items: center;
    }

    .item_detail img {
        width: 80px;
        height: 80px;
        border-radius: 3px;
        /* margin-top: 10px; */
        float: left;
    }

    .item_detail .name {
        margin-left: 165px;
        margin-top: 20px;
    } 
    /*.item_header {
        display: flex;
        width: 1000px;
        margin: 0 auto;
        height: 30px;
        background-color: #FFFFFF;
        opacity: 0.8;
        border-radius: 5px;
        padding-left: 10px;
        box-shadow: 1px 1px 5px black;
    }


        .item_header .item_detail {
            width: 35%;
        }

    .item_body {
        margin-top: 20px;
        height: 100px;
        align-items: center;
        box-shadow: 1px 1px 5px black;
    }

    .cn {
        text-align: center;
    }

    .ri {
        text-align: right;
    }

    .item_detail img {
        width: 80px;
        height: 80px;
        border-radius: 5px;*/
        /* margin-top: 10px; */
        /*float: left;
    }

    .item_detail .name {
        margin-left: 100px;
        margin-top: 20px;
    }*/

    .wh {
        width: 20px;
        height: 25px;
    }

    * {
        margin: 0px;
        padding: 0px;
    }

    #menu {
        margin: auto;
    }

    .main {
        background-color: #899e9c;
        color: white;
        font-family: 微軟雅黑體;
        font-weight: bold;
        font-size: 20px;
        cursor: pointer;
        text-align: center;
        height: 35px;
        line-height: 40px;
        width: 100px;
    }

        .main:hover {
            background-color: #899e9c;
        }

    .sub {
        cursor: pointer;
        background-color: #a2bdb7;
        color: white;
        font-family: 微軟雅黑體;
        text-align: center;
        font-weight: bold;
        width: 100px;
    }

        .sub li {
            list-style-type: none;
            line-height: 35px;
        }


    * {
        margin: 0px;
        padding: 0px;
    }

    #menu {
        margin: auto;
    }


    .item {
        float: left;
    }



    .sub li {
        list-style-type: none;
    }
   /* body {
        background-color: rgba(0, 0, 0,.2);
    }*/

</style>
<script>
    function AJ() {
        $.ajax({
            url: '/_/MochiProduct?handler=AJ',
            type: 'post',
            data: { Key: $('#Key').val() },
            //加上X-CSRF-TOKEN header
            beforeSend: function (xhr) {
                xhr.setRequestHeader("X-CSRF-TOKEN",
                    $('input:hidden[name="__RequestVerificationToken"]').val());
            },
            //headers: { 'X-CSRF-TOKEN': $('[name=__RequestVerificationToken]').val() },
            dataType: 'json',
            success: function (R) {
                alert(R);
            }
            , statusCode: { 404: function () { self.location = '/Account/Login/'; } }
            , complete: function (XHR, TS) { XHR = null; }
        }).fail(function (jqXHR, textStatus, errorThrown) {
            //ajax.abort()會觸發
            if (jqXHR.responseText != null) {
                alert('jqXHR.responseText:' + jqXHR.responseText);
                //finished(jqXHR.responseText);
            }
            //alert('fail' + jqXHR.responseText + textStatus + errorThrown);
        });

    }
    $(document).ready(function () {
        //var oldtext = ['OUR COMPANY', 'TASTE & WELLBEING', 'FRAGRANCE & BEAUTY', 'Media', 'Eng']
        var newtext = ['關於我們', '最新消息', '線上購物', '門市據點', '聯絡我們']
        for (i = 0; i < $(".main").length; i++) {
            $(".sub").slideUp(0)
            $(".main:eq(" + i + ")").mouseover({ id: i }, function (e) {
                n = e.data.id
                $(".main:eq(" + n + ")").text(newtext[n])
                $(".sub:eq(" + n + ")").slideToggle()
                $(".sub:not(:eq(" + n + "))").slideUp()
            })
            //$(".main").mouseleave({ id: i }, function (e) {
            //    n = e.data.id
            //    //$(".sub:eq("+n+")").slideUp(200)
            //    $(".main:eq(" + n + ")").text(oldtext[n])
            //})
        }
        $("#menu").css("width", $(".main").length * 150)
    })
    $("#tabs-nav a").click(function (event) {

        event.preventDefault();
        $("#tabs-nav a").removeClass("tabs-menu-active");
        $(this).addClass("tabs-menu-active");
        $(".tabs-panel").hide();
        var tab_id = $(this).data("target");
        $("#" + tab_id).show();
    });


    function QtyPlus() {
        var a = 0;
        var b = 300;
        var c = 0;
        if ($('#Qtys').val() != null && $('#Qtys').val() != '') {
            a = parseInt($('#Qtys').val()) + 1;
            c = a * b
        }
        $('#Qtys').val(a);
        $('#CQtys').val(c);

    }

    function QtyLess() {
        var a = 0;
        var b = 300;
        if ($('#Qtys').val() > 0) {
            if ($('#Qtys').val() != null && $('#Qtys').val() != '') {
                a = parseInt($('#Qtys').val()) - 1;
            }
            $('#Qtys').val(a);
            $('#CQtys').val(a * b);
        }
    }

    $(function () {
        $("#tabs-nav a").click(function (event) {
            event.preventDefault();
            $("#tabs-nav a").removeClass("tabs-menu-active");
            $(this).addClass("tabs-menu-active");
            $(".tabs-panel").removeClass("animated-tabs bounceIn").hide();
            var tab_id = $(this).data("target");
            $("#" + tab_id).addClass("animated-tabs bounceIn").show();
        });
    });

</script>


<div style="float:right;">
    <div id="menu">
        <!-- 第一組清單   -->
        <div class="item">
            <div class="main">關於我們</div>
            <div class="sub">
                <ul>
                    <li>品牌故事</li>
                </ul>
            </div>
        </div>
        <!-- 第二組清單   -->
        <div class="item">
            <div class="main">最新消息</div>
            <div class="sub">
                <ul>
                    <li>最新消息</li>
                    <li>優惠活動</li>
                </ul>
            </div>
        </div>
        <!-- 第三組清單   -->
        <div class="item">
            <div class="main">線上購物</div>
        </div>
        <!-- 第四組清單   -->
        <div class="item">
            <div class="main">門市據點</div>
        </div>
        <!-- 第五組清單   -->
        <div class="item">
            <div class="main">聯絡我們</div>
        </div>

    </div>
</div>

<div id="app">

    <div class="container">
        <div class="item_header">
            <div class="ri">商品圖片</div>
            <div class="ri">商品名稱</div>
            <div class="ri">單價</div>
            <div class="ri">數量</div>
            <div class="ri">總計</div>
            <div class="cn">操作</div>
        </div>  @foreach (System.Data.DataRow row in prd.Rows)
        {
            <div id="Row" class="item_header item_body">

                <div class="item_detail">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmqUkOIU9pmgJOEpRNwQl9-gUhBL-O2qLOLw&usqp=CAU" />
                    <div class="name">@row["Name"].ToString()</div>

                </div>

                <div class="price" style="width:150px;"><span>$</span>300</div>
                <div style="width:150px;" class="count">
                    <button class="wh" type="button" onclick="QtyLess();">-</button>
                    <input type="number" id="Qtys" style="width:40px;height:25px;" value="1" />
                    <button class="wh" type="button" onclick="QtyPlus();">+</button>
                </div>
                <div class="count">
                     <form action="post" method="post">
                        <input type="number" id="CQtys" Name="Qty " style="width:40px;height:25px;" value="這個是抓到你後端資料庫傳回來的資料才對" />
                    </form>
                </div>
               
                <div class="operate">
                    <button>刪除</button>
                </div>

            </div>}
    </div>
</div>

